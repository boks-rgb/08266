<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>💎 미덕 퀴즈</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #ffeef3;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }
    .instruction {
      font-size: 1.2rem;
      margin-bottom: 20px;
      color: #555;
    }
    .question {
      font-size: 1.4rem;
      font-weight: bold;
      margin-bottom: 20px;
    }
    .virtue-grid {
      display: grid;
      grid-template-columns: repeat(13, auto);
      gap: 8px;
      justify-content: center;
      max-width: 95vw;
      margin: auto;
    }
    button {
      padding: 8px 12px;
      border: 2px solid hotpink;
      border-radius: 10px;
      background: white;
      cursor: pointer;
      transition: 0.2s;
    }
    button:hover {
      background-color: #ffddea;
    }
    .feedback {
      margin-top: 20px;
      font-weight: bold;
    }
    .progress {
      margin-top: 30px;
      font-size: 1.1rem;
    }
    .levels {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 20px;
    }
    .level-box {
      padding: 6px 12px;
      border: 2px solid #ccc;
      border-radius: 12px;
      background: #fff;
    }
    .level-box.active {
      background: hotpink;
      color: white;
      font-weight: bold;
      border-color: deeppink;
    }
  </style>
</head>
<body>
  <h1>💎 미덕 퀴즈</h1>
  <div class="instruction">뜻에 맞는 미덕의 보석 단어를 골라주세요.</div>
  <div class="question" id="question">뜻 불러오는 중...</div>
  <div class="virtue-grid" id="grid"></div>
  <div class="feedback" id="feedback"></div>

  <div class="progress">
    ✨ 나의 미덕 포인트: <span id="points">0</span><br><br>
    현재 레벨: <span id="level">🐣 병아리</span>
  </div>

  <div class="levels" id="levelTrack"></div>

  <script>
    const words = [
      "감사", "배려", "유연성", "창의성",
      "결의", "봉사", "이상품기", "책임감",
      "겸손", "사랑", "이해", "청결",
      "관용", "사려", "인내", "초연",
      "근면", "상냥함", "인정", "충직",
      "기뻐함", "소신", "자율", "친절",
      "기지", "신뢰", "절도", "탁월함",
      "끈기", "신용", "정돈", "평온함",
      "너그러움", "열정", "정의로움", "한결같음",
      "도움", "예의", "정직", "헌신",
      "명예", "용기", "존중", "협동",
      "목적의식", "용서", "중용", "화합",
      "믿음직함", "우의", "진실함", "확신"
    ];

    const meanings = {
      "감사": "고마운 마음을 표현함",
      "배려": "다른 사람을 생각하고 도와줌",
      "유연성": "상황에 맞게 부드럽게 행동함",
      "창의성": "새로운 생각을 해냄",
      "결의": "굳게 결심하고 밀고 나감",
      "봉사": "다른 사람을 위해 돕는 행동",
      "이상품기": "높은 목표를 향한 포부를 품음",
      "책임감": "자신의 역할을 다하려는 마음",
      "겸손": "스스로를 자랑하지 않고 남을 존중함",
      "사랑": "상대방을 깊이 아끼는 마음",
      "이해": "상대방의 입장을 알아줌",
      "청결": "깨끗하게 유지함",
      "관용": "다름을 인정하고 받아들임",
      "사려": "깊이 생각하고 배려함",
      "인내": "어려움을 참고 견딤",
      "초연": "감정에 흔들리지 않음",
      "근면": "부지런하고 성실함",
      "상냥함": "다정다감하게 행동함",
      "인정": "상대를 인정하고 받아들임",
      "충직": "충성과 정직함을 지님",
      "기뻐함": "작은 일에도 기쁨을 느낌",
      "소신": "자신의 생각을 지킴",
      "자율": "스스로 조절하고 선택함",
      "친절": "다정하고 배려심 있게 행동함",
      "기지": "기발한 생각으로 문제를 해결함",
      "신뢰": "믿고 의지함",
      "절도": "알맞게 조절함",
      "탁월함": "아주 뛰어남",
      "끈기": "쉽게 포기하지 않음",
      "신용": "믿을 수 있는 평판",
      "정돈": "정리정돈이 잘 되어 있음",
      "평온함": "마음이 조용하고 안정됨",
      "너그러움": "잘 용서하고 포용함",
      "열정": "강한 의지와 에너지로 임함",
      "정의로움": "옳고 그름을 바로 판단함",
      "한결같음": "항상 같고 변하지 않음",
      "도움": "남을 도와줌",
      "예의": "예절을 지킴",
      "정직": "거짓 없이 참됨",
      "헌신": "자기를 희생하며 도움",
      "명예": "훌륭한 이름과 자랑",
      "용기": "두려움 없이 나아감",
      "존중": "상대를 소중히 여김",
      "협동": "서로 힘을 합함",
      "목적의식": "목표를 분명히 함",
      "용서": "잘못을 이해하고 받아들임",
      "중용": "지나치지 않음",
      "화합": "서로 잘 어울림",
      "믿음직함": "신뢰할 수 있음",
      "우의": "우정이 깊음",
      "진실함": "거짓이 없음",
      "확신": "자신 있게 믿음"
    };

    const levels = [
      { min: 0, emoji: "🐣", name: "병아리" },
      { min: 3, emoji: "🌱", name: "새싹" },
      { min: 6, emoji: "🌼", name: "꽃망울" },
      { min: 10, emoji: "🦋", name: "나비" },
      { min: 15, emoji: "🐯", name: "용감이" },
      { min: 20, emoji: "👑", name: "보석왕" }
    ];

    let points = parseInt(localStorage.getItem("points") || "0");
    let currentAnswer = "";

    const question = document.getElementById("question");
    const grid = document.getElementById("grid");
    const feedback = document.getElementById("feedback");
    const pointsEl = document.getElementById("points");
    const levelEl = document.getElementById("level");
    const levelTrack = document.getElementById("levelTrack");

    function shuffle(array) {
      return array.sort(() => Math.random() - 0.5);
    }

    function updateLevel() {
      const level = levels.reduce((acc, l) => points >= l.min ? l : acc, levels[0]);
      levelEl.textContent = `${level.emoji} ${level.name}`;
      levelTrack.innerHTML = "";
      levels.forEach(l => {
        const div = document.createElement("div");
        div.className = "level-box" + (l.name === level.name ? " active" : "");
        div.textContent = `${l.emoji} ${l.name}`;
        levelTrack.appendChild(div);
      });
    }

    function setQuestion() {
      const keys = Object.keys(meanings);
      currentAnswer = shuffle(keys)[0];
      question.textContent = `뜻: ${meanings[currentAnswer]}`;
    }

    function makeButtons() {
      grid.innerHTML = "";
      const sorted = [...words].sort((a, b) => a.localeCompare(b, 'ko'));
      sorted.forEach(word => {
        const btn = document.createElement("button");
        btn.textContent = word;
        btn.onclick = () => checkAnswer(word);
        grid.appendChild(btn);
      });
    }

    function checkAnswer(word) {
      if (word === currentAnswer) {
        feedback.textContent = "정답이에요! 🎉";
        points++;
        localStorage.setItem("points", points);
      } else {
        feedback.textContent = `아쉬워요! 정답은 "${currentAnswer}"`;
      }
      pointsEl.textContent = points;
      updateLevel();
      setTimeout(() => {
        feedback.textContent = "";
        setQuestion();
      }, 1500);
    }

    // 초기 실행
    pointsEl.textContent = points;
    updateLevel();
    setQuestion();
    makeButtons();
  </script>
</body>
</html>
